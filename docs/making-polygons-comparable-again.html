<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>7 Making polygons comparable again | Herramientas de análisis espacial en R</title>
  <meta name="description" content="Usando R para analizar datos espaciales" />
  <meta name="generator" content="bookdown 0.19 and GitBook 2.6.7" />

  <meta property="og:title" content="7 Making polygons comparable again | Herramientas de análisis espacial en R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Usando R para analizar datos espaciales" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="7 Making polygons comparable again | Herramientas de análisis espacial en R" />
  
  <meta name="twitter:description" content="Usando R para analizar datos espaciales" />
  

<meta name="author" content="Martin Montane" />


<meta name="date" content="2020-07-01" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="mapas.html"/>

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.3.9000/leaflet.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.0.3.9000/leaflet-providers-plugin.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Herramientas de análisis espacial en R</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#qué-necesitamos-para-arrancar"><i class="fa fa-check"></i>¿Qué necesitamos para arrancar?</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="datos-espaciales-en-r.html"><a href="datos-espaciales-en-r.html"><i class="fa fa-check"></i><b>1</b> Datos espaciales en R</a><ul>
<li class="chapter" data-level="1.1" data-path="datos-espaciales-en-r.html"><a href="datos-espaciales-en-r.html#qué-es-un-dato-espacial"><i class="fa fa-check"></i><b>1.1</b> ¿Qué es un dato espacial?</a></li>
<li class="chapter" data-level="1.2" data-path="datos-espaciales-en-r.html"><a href="datos-espaciales-en-r.html#dónde-estamos-en-la-tierra"><i class="fa fa-check"></i><b>1.2</b> ¿Dónde estamos en la Tierra?</a></li>
<li class="chapter" data-level="1.3" data-path="datos-espaciales-en-r.html"><a href="datos-espaciales-en-r.html#coordinate-reference-systems"><i class="fa fa-check"></i><b>1.3</b> Coordinate Reference Systems</a><ul>
<li class="chapter" data-level="1.3.1" data-path="datos-espaciales-en-r.html"><a href="datos-espaciales-en-r.html#elipsoides-sistemas-de-coordenadas-y-datums"><i class="fa fa-check"></i><b>1.3.1</b> Elipsoides, sistemas de coordenadas y datums</a></li>
<li class="chapter" data-level="1.3.2" data-path="datos-espaciales-en-r.html"><a href="datos-espaciales-en-r.html#proyecciones"><i class="fa fa-check"></i><b>1.3.2</b> Proyecciones</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="datos-espaciales-en-r.html"><a href="datos-espaciales-en-r.html#manos-a-la-obra-dónde-construir-el-próximo-centro-de-salud"><i class="fa fa-check"></i><b>1.4</b> Manos a la obra ¿Dónde construir el próximo centro de salud?</a><ul>
<li class="chapter" data-level="1.4.1" data-path="datos-espaciales-en-r.html"><a href="datos-espaciales-en-r.html#cargando-los-datos-espaciales"><i class="fa fa-check"></i><b>1.4.1</b> Cargando los datos espaciales</a></li>
<li class="chapter" data-level="1.4.2" data-path="datos-espaciales-en-r.html"><a href="datos-espaciales-en-r.html#detectando-la-cobertura-actual."><i class="fa fa-check"></i><b>1.4.2</b> Detectando la cobertura actual.</a></li>
<li class="chapter" data-level="1.4.3" data-path="datos-espaciales-en-r.html"><a href="datos-espaciales-en-r.html#distancia-contra-la-avenida-más-cercana"><i class="fa fa-check"></i><b>1.4.3</b> Distancia contra la avenida más cercana</a></li>
<li class="chapter" data-level="1.4.4" data-path="datos-espaciales-en-r.html"><a href="datos-espaciales-en-r.html#incorporando-el-resto-de-las-variables"><i class="fa fa-check"></i><b>1.4.4</b> Incorporando el resto de las variables</a></li>
<li class="chapter" data-level="1.4.5" data-path="datos-espaciales-en-r.html"><a href="datos-espaciales-en-r.html#creando-nuestro-índice-de-demanda-de-salud"><i class="fa fa-check"></i><b>1.4.5</b> Creando nuestro índice de demanda de salud</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="datos-espaciales-en-r.html"><a href="datos-espaciales-en-r.html#ejercicio"><i class="fa fa-check"></i><b>1.5</b> Ejercicio</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="geocoding-de-la-representación-humana-al-sistema-de-coordenadas.html"><a href="geocoding-de-la-representación-humana-al-sistema-de-coordenadas.html"><i class="fa fa-check"></i><b>2</b> Geocoding: de la representación humana al sistema de coordenadas</a><ul>
<li class="chapter" data-level="2.1" data-path="geocoding-de-la-representación-humana-al-sistema-de-coordenadas.html"><a href="geocoding-de-la-representación-humana-al-sistema-de-coordenadas.html#qué-es-la-geocodificación-o-geocoding"><i class="fa fa-check"></i><b>2.1</b> ¿Qué es la geocodificación o geocoding?</a></li>
<li class="chapter" data-level="2.2" data-path="geocoding-de-la-representación-humana-al-sistema-de-coordenadas.html"><a href="geocoding-de-la-representación-humana-al-sistema-de-coordenadas.html#api-interfaz-de-programación-de-aplicaciones"><i class="fa fa-check"></i><b>2.2</b> API: Interfaz de programación de aplicaciones</a></li>
<li class="chapter" data-level="2.3" data-path="geocoding-de-la-representación-humana-al-sistema-de-coordenadas.html"><a href="geocoding-de-la-representación-humana-al-sistema-de-coordenadas.html#servicio-de-normalización-de-datos-geográficos-de-argentina"><i class="fa fa-check"></i><b>2.3</b> Servicio de Normalización de Datos Geográficos de Argentina</a></li>
<li class="chapter" data-level="2.4" data-path="geocoding-de-la-representación-humana-al-sistema-de-coordenadas.html"><a href="geocoding-de-la-representación-humana-al-sistema-de-coordenadas.html#google-geocode-api"><i class="fa fa-check"></i><b>2.4</b> Google geocode API</a></li>
<li class="chapter" data-level="2.5" data-path="geocoding-de-la-representación-humana-al-sistema-de-coordenadas.html"><a href="geocoding-de-la-representación-humana-al-sistema-de-coordenadas.html#diferencias-entre-las-dos-apis"><i class="fa fa-check"></i><b>2.5</b> Diferencias entre las dos APIs</a></li>
<li class="chapter" data-level="2.6" data-path="geocoding-de-la-representación-humana-al-sistema-de-coordenadas.html"><a href="geocoding-de-la-representación-humana-al-sistema-de-coordenadas.html#una-tercera-alternativa-herer"><i class="fa fa-check"></i><b>2.6</b> Una tercera alternativa: hereR</a></li>
<li class="chapter" data-level="2.7" data-path="geocoding-de-la-representación-humana-al-sistema-de-coordenadas.html"><a href="geocoding-de-la-representación-humana-al-sistema-de-coordenadas.html#comparando-todos-los-métodos"><i class="fa fa-check"></i><b>2.7</b> Comparando todos los métodos</a></li>
<li class="chapter" data-level="2.8" data-path="geocoding-de-la-representación-humana-al-sistema-de-coordenadas.html"><a href="geocoding-de-la-representación-humana-al-sistema-de-coordenadas.html#ejercicios"><i class="fa fa-check"></i><b>2.8</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="tiempos-de-viaje-y-análisis-de-accesibilidad.html"><a href="tiempos-de-viaje-y-análisis-de-accesibilidad.html"><i class="fa fa-check"></i><b>3</b> Tiempos de viaje y análisis de accesibilidad</a><ul>
<li class="chapter" data-level="3.1" data-path="tiempos-de-viaje-y-análisis-de-accesibilidad.html"><a href="tiempos-de-viaje-y-análisis-de-accesibilidad.html#la-distancia-espacial-y-la-distancia-de-viaje"><i class="fa fa-check"></i><b>3.1</b> La distancia espacial y la distancia de viaje</a></li>
<li class="chapter" data-level="3.2" data-path="tiempos-de-viaje-y-análisis-de-accesibilidad.html"><a href="tiempos-de-viaje-y-análisis-de-accesibilidad.html#los-paquetes-que-vamos-a-utilizar"><i class="fa fa-check"></i><b>3.2</b> Los paquetes que vamos a utilizar</a><ul>
<li class="chapter" data-level="3.2.1" data-path="tiempos-de-viaje-y-análisis-de-accesibilidad.html"><a href="tiempos-de-viaje-y-análisis-de-accesibilidad.html#cómo-usar-los-servicios-de-here"><i class="fa fa-check"></i><b>3.2.1</b> Cómo usar los servicios de HERE</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="tiempos-de-viaje-y-análisis-de-accesibilidad.html"><a href="tiempos-de-viaje-y-análisis-de-accesibilidad.html#los-datos-repositorio-de-datos-del-gcba"><i class="fa fa-check"></i><b>3.3</b> Los datos: repositorio de datos del GCBA</a></li>
<li class="chapter" data-level="3.4" data-path="tiempos-de-viaje-y-análisis-de-accesibilidad.html"><a href="tiempos-de-viaje-y-análisis-de-accesibilidad.html#transformando-nuestros-datos"><i class="fa fa-check"></i><b>3.4</b> Transformando nuestros datos</a></li>
<li class="chapter" data-level="3.5" data-path="tiempos-de-viaje-y-análisis-de-accesibilidad.html"><a href="tiempos-de-viaje-y-análisis-de-accesibilidad.html#cuánto-tardo-en-llegar-al-monumental"><i class="fa fa-check"></i><b>3.5</b> ¿Cuánto tardo en llegar al monumental?</a></li>
<li class="chapter" data-level="3.6" data-path="tiempos-de-viaje-y-análisis-de-accesibilidad.html"><a href="tiempos-de-viaje-y-análisis-de-accesibilidad.html#midiendo-la-cobertura-de-los-parques"><i class="fa fa-check"></i><b>3.6</b> Midiendo la cobertura de los parques</a></li>
<li class="chapter" data-level="3.7" data-path="tiempos-de-viaje-y-análisis-de-accesibilidad.html"><a href="tiempos-de-viaje-y-análisis-de-accesibilidad.html#redondeando-caracterizando-la-oferta-de-los-espacios-verdes-en-caba"><i class="fa fa-check"></i><b>3.7</b> Redondeando: caracterizando la oferta de los espacios verdes en CABA</a></li>
<li class="chapter" data-level="3.8" data-path="tiempos-de-viaje-y-análisis-de-accesibilidad.html"><a href="tiempos-de-viaje-y-análisis-de-accesibilidad.html#ejercicios-1"><i class="fa fa-check"></i><b>3.8</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="el-ritual-del-aprendizaje-automático-parte-1.html"><a href="el-ritual-del-aprendizaje-automático-parte-1.html"><i class="fa fa-check"></i><b>4</b> El ritual del aprendizaje automático (Parte 1)</a><ul>
<li class="chapter" data-level="4.1" data-path="el-ritual-del-aprendizaje-automático-parte-1.html"><a href="el-ritual-del-aprendizaje-automático-parte-1.html#paso-1-carga-de-los-datos"><i class="fa fa-check"></i><b>4.1</b> Paso 1: Carga de los datos</a></li>
<li class="chapter" data-level="4.2" data-path="el-ritual-del-aprendizaje-automático-parte-1.html"><a href="el-ritual-del-aprendizaje-automático-parte-1.html#paso-2-análisis-exploratorio-y-corrección-de-errores"><i class="fa fa-check"></i><b>4.2</b> Paso 2: análisis exploratorio y corrección de errores</a></li>
<li class="chapter" data-level="4.3" data-path="el-ritual-del-aprendizaje-automático-parte-1.html"><a href="el-ritual-del-aprendizaje-automático-parte-1.html#paso-3-crear-nuevas-variables-o-feature-engineering"><i class="fa fa-check"></i><b>4.3</b> Paso 3: crear nuevas variables (o <em>feature engineering</em>)</a></li>
<li class="chapter" data-level="4.4" data-path="el-ritual-del-aprendizaje-automático-parte-1.html"><a href="el-ritual-del-aprendizaje-automático-parte-1.html#paso-4-criterio-de-selección-y-optimización-de-los-parámetros"><i class="fa fa-check"></i><b>4.4</b> Paso 4: criterio de selección y optimización de los parámetros</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="el-ritual-del-aprendizaje-automático-parte-2.html"><a href="el-ritual-del-aprendizaje-automático-parte-2.html"><i class="fa fa-check"></i><b>5</b> El ritual del aprendizaje automático (Parte 2)</a><ul>
<li class="chapter" data-level="5.1" data-path="el-ritual-del-aprendizaje-automático-parte-2.html"><a href="el-ritual-del-aprendizaje-automático-parte-2.html#separando-dataset-de-entrenamiento-y-de-testing"><i class="fa fa-check"></i><b>5.1</b> Separando dataset de entrenamiento y de testing</a></li>
<li class="chapter" data-level="5.2" data-path="el-ritual-del-aprendizaje-automático-parte-2.html"><a href="el-ritual-del-aprendizaje-automático-parte-2.html#nuestra-receta-y-su-preparación"><i class="fa fa-check"></i><b>5.2</b> Nuestra receta y su preparación</a></li>
<li class="chapter" data-level="5.3" data-path="el-ritual-del-aprendizaje-automático-parte-2.html"><a href="el-ritual-del-aprendizaje-automático-parte-2.html#selección-de-modelo-y-espacio-de-búsqueda-de-los-parámetros"><i class="fa fa-check"></i><b>5.3</b> Selección de modelo y espacio de búsqueda de los parámetros</a></li>
<li class="chapter" data-level="5.4" data-path="el-ritual-del-aprendizaje-automático-parte-2.html"><a href="el-ritual-del-aprendizaje-automático-parte-2.html#entrenando-los-modelos-en-nuestro-espacio-de-búsqueda"><i class="fa fa-check"></i><b>5.4</b> Entrenando los modelos en nuestro espacio de búsqueda</a></li>
<li class="chapter" data-level="5.5" data-path="el-ritual-del-aprendizaje-automático-parte-2.html"><a href="el-ritual-del-aprendizaje-automático-parte-2.html#seleccionando-el-mejor-modelo-y-analizando-los-resultados"><i class="fa fa-check"></i><b>5.5</b> Seleccionando el mejor modelo y analizando los resultados</a></li>
<li class="chapter" data-level="5.6" data-path="el-ritual-del-aprendizaje-automático-parte-2.html"><a href="el-ritual-del-aprendizaje-automático-parte-2.html#importancia-de-las-variables"><i class="fa fa-check"></i><b>5.6</b> Importancia de las variables</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="mapas.html"><a href="mapas.html"><i class="fa fa-check"></i><b>6</b> Mapas</a><ul>
<li class="chapter" data-level="6.1" data-path="mapas.html"><a href="mapas.html#trabajando-con-el-censo-2010"><i class="fa fa-check"></i><b>6.1</b> Trabajando con el censo 2010</a><ul>
<li class="chapter" data-level="6.1.1" data-path="mapas.html"><a href="mapas.html#datos-del-censo-2010"><i class="fa fa-check"></i><b>6.1.1</b> Datos del censo 2010</a></li>
<li class="chapter" data-level="6.1.2" data-path="mapas.html"><a href="mapas.html#polígonos-del-censo-2010"><i class="fa fa-check"></i><b>6.1.2</b> Polígonos del Censo 2010</a></li>
<li class="chapter" data-level="6.1.3" data-path="mapas.html"><a href="mapas.html#uniendo-los-datos-con-sus-polígonos"><i class="fa fa-check"></i><b>6.1.3</b> Uniendo los datos con sus polígonos</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="mapas.html"><a href="mapas.html#haciendo-visualizaciones"><i class="fa fa-check"></i><b>6.2</b> Haciendo visualizaciones</a><ul>
<li class="chapter" data-level="6.2.1" data-path="mapas.html"><a href="mapas.html#ggplot2"><i class="fa fa-check"></i><b>6.2.1</b> Ggplot2</a></li>
<li class="chapter" data-level="6.2.2" data-path="mapas.html"><a href="mapas.html#tmap"><i class="fa fa-check"></i><b>6.2.2</b> Tmap</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="mapas.html"><a href="mapas.html#leaflet"><i class="fa fa-check"></i><b>6.3</b> Leaflet</a></li>
<li class="chapter" data-level="6.4" data-path="mapas.html"><a href="mapas.html#ejercicios-2"><i class="fa fa-check"></i><b>6.4</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="making-polygons-comparable-again.html"><a href="making-polygons-comparable-again.html"><i class="fa fa-check"></i><b>7</b> Making polygons comparable again</a><ul>
<li class="chapter" data-level="7.1" data-path="making-polygons-comparable-again.html"><a href="making-polygons-comparable-again.html#carga-de-los-datos"><i class="fa fa-check"></i><b>7.1</b> Carga de los datos</a></li>
<li class="chapter" data-level="7.2" data-path="making-polygons-comparable-again.html"><a href="making-polygons-comparable-again.html#diferentes-radios-censales"><i class="fa fa-check"></i><b>7.2</b> Diferentes radios censales</a><ul>
<li class="chapter" data-level="7.2.1" data-path="making-polygons-comparable-again.html"><a href="making-polygons-comparable-again.html#breve-desvío-haciendo-lo-mismo-con-ggplot"><i class="fa fa-check"></i><b>7.2.1</b> Breve desvío: haciendo lo mismo con ggplot()</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="making-polygons-comparable-again.html"><a href="making-polygons-comparable-again.html#make-polygons-comparable-again"><i class="fa fa-check"></i><b>7.3</b> Make polygons comparable again</a></li>
<li class="chapter" data-level="7.4" data-path="making-polygons-comparable-again.html"><a href="making-polygons-comparable-again.html#haciendo-mapas-de-nuestros-nuevos-datos"><i class="fa fa-check"></i><b>7.4</b> Haciendo mapas de nuestros nuevos datos</a></li>
<li class="chapter" data-level="7.5" data-path="making-polygons-comparable-again.html"><a href="making-polygons-comparable-again.html#ejercicio-1"><i class="fa fa-check"></i><b>7.5</b> Ejercicio</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Herramientas de análisis espacial en R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="making-polygons-comparable-again" class="section level1">
<h1><span class="header-section-number">7</span> Making polygons comparable again</h1>
<p>El INDEC realiza censos con un intervalo de aproximadamente 10 años en Argentina. Las últimas dos ediciones al escribir estas lineas fueron en los años 2001 y 2010. Los censos poblacionales son una de las formas más clásicas de conseguir información homogenéa, de alcance nacional sobre las condiciones de vida de toda la población Argentina, tanto urbana y rural, con un nivel de granuralidad bastante aceptable. Todavía más, al hacerse cada cirto período de tiempo, es posible analizar variaciones entre décadas.</p>
<p>La unidad espacial mínima de los censos de Argentina son los radios censales. Comparar la evolución de diversas variables entre censos a ese nivel de desagregación es muy útil para responder muchas interesantes. En este ejercicio vamos a poder analizar cómo cambió la edad promedio de los habitantes de estos radios censales entre 2001 y 2010 en la Ciudad de Buenos Aires. Para hacerlo, vamos a encontrarnos con un problema entre los polígonos de ambos censos. Miren la figura que aparece abajo ¿Son iguales?</p>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-192"></span>
<img src="data/HerramientasDatosEspaciales/comparacionradioscensales.png" alt="La proyección MERCATOR distorsiona nuestra percepción de los tamaños" width="400px" />
<p class="caption">
Figure 7.1: La proyección MERCATOR distorsiona nuestra percepción de los tamaños
</p>
</div>
<p>Claramente no: los radios censales cambiaron de forma entre 2001 y 2010. Esto es atendible, ya que estos radios suelen crearse respetando ciertos criterios metodológicos que no priorizan la comparación entre censos. Con todo, sería una pena no poder trabajar con estos datos: vamos a aprender una alternativa para resolver este problema, pero a un costo.</p>
<p>Para hacer comparables los datos entre ambos polígonos, debemos hacer determinados supuestos de cómo se distribuyen los datos hacia adentro de ellos Uno de los supuestos más usuales es asumir que los datos se distribuyen de manera homogénea hacia dento de los polígonos. Esto hace muy fácil poder trabajar con los polígonos mediante lo que se conoce como <em>Interpolación ponderada por peso</em>, o areal weighted interpolation.</p>
<div id="carga-de-los-datos" class="section level2">
<h2><span class="header-section-number">7.1</span> Carga de los datos</h2>
<p>Lo primero que habría que hacer es cargar los datos. Sin embargo, sabemos que debemos cargar las librerias en nuestra sesión de R para que muchas de las funciones que usamos se ejecuten.</p>
<div class="sourceCode" id="cb247"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb247-1"><a href="making-polygons-comparable-again.html#cb247-1"></a><span class="kw">library</span>(tidyverse) <span class="co"># Para manipular datos y graficarlos</span></span>
<span id="cb247-2"><a href="making-polygons-comparable-again.html#cb247-2"></a><span class="kw">library</span>(sf) <span class="co"># Para manipular datos espaciales</span></span>
<span id="cb247-3"><a href="making-polygons-comparable-again.html#cb247-3"></a><span class="kw">library</span>(tmap) <span class="co"># Para graficar datos espaciales</span></span></code></pre></div>
<p>Una vez que tengamos cargadas las librerías vamos a descargar los datos desde el repositorio. Podría haber enviado todo en un RData, pero quiero introducirlos a una nueva forma de guardar datos espaciales: <strong>geojson</strong>. La ventaja más obvia de este tipo de archivos espaciales es que consiste de un solo archivo que contiene todos los datos en listas. No vamos a preocuparnos estrictamente por su forma, pero lo que sí vamos a hacer es leer un geojson porque probablemente sea uno de los archivos con los que eventualmente se encuentren.</p>
<div class="sourceCode" id="cb248"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb248-1"><a href="making-polygons-comparable-again.html#cb248-1"></a>datosCenso2001 &lt;-<span class="st"> </span><span class="kw">read_sf</span>(<span class="st">&quot;https://github.com/datalab-UTDT/GIS2/raw/master/AWI/radiosCensalesCABA2001.geojson&quot;</span>)</span>
<span id="cb248-2"><a href="making-polygons-comparable-again.html#cb248-2"></a>datosCenso2010 &lt;-<span class="st"> </span><span class="kw">read_sf</span>(<span class="st">&quot;https://github.com/datalab-UTDT/GIS2/raw/master/AWI/radiosCensalesCABA2010.geojson&quot;</span>)</span></code></pre></div>
<p>Los <strong>geojson</strong> se leen con la misma función <strong>read_sf</strong>. Un punto importante a tener en cuenta cuando trabajamos con este formato de datos espaciales es que obliga a que el CRS sea el 4326, es decir el WSG84 sin proyectar. Aunque podríamos seguir trabajando con esta proyección, vamos a transformarlos a la proyección inicial en la cual vinieron. No conocemos el código <strong>EPSG</strong>, pero sí el <strong>proj4string</strong> correspondiente:
<strong>+proj=tmerc +lat_0=-90 +lon_0=-66 +k=1 +x_0=3500000 +y_0=0 +ellps=WGS84 +units=m +no_defs</strong>.
Con el siguiente código van a tener a los dos objetos en la proyección con la que arrancaron.</p>
<div class="sourceCode" id="cb249"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb249-1"><a href="making-polygons-comparable-again.html#cb249-1"></a>datosCenso2001 &lt;-<span class="st"> </span>datosCenso2001 <span class="op">%&gt;%</span></span>
<span id="cb249-2"><a href="making-polygons-comparable-again.html#cb249-2"></a><span class="st">                  </span><span class="kw">st_transform</span>(<span class="st">&#39;+proj=tmerc +lat_0=-90 +lon_0=-66 +k=1 +x_0=3500000 +y_0=0 +ellps=WGS84 +units=m +no_defs&quot;&#39;</span>)</span>
<span id="cb249-3"><a href="making-polygons-comparable-again.html#cb249-3"></a>datosCenso2010 &lt;-<span class="st"> </span>datosCenso2010 <span class="op">%&gt;%</span></span>
<span id="cb249-4"><a href="making-polygons-comparable-again.html#cb249-4"></a><span class="st">                  </span><span class="kw">st_transform</span>(<span class="st">&#39;+proj=tmerc +lat_0=-90 +lon_0=-66 +k=1 +x_0=3500000 +y_0=0 +ellps=WGS84 +units=m +no_defs&quot;&#39;</span>)</span></code></pre></div>
<p>Si quieren investiguen que variables hay en cada uno de los datos censales con las funciones que ya vimos en clase, tales como <strong>str</strong> o <strong>colnames</strong>. Pueden probar una función adicional de tidyverse: <strong>glimpse()</strong></p>
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb250-1"><a href="making-polygons-comparable-again.html#cb250-1"></a><span class="kw">glimpse</span>(datosCenso2001)</span></code></pre></div>
<pre><code>## Rows: 3,407
## Columns: 23
## $ COD_2001                  &lt;chr&gt; &quot;020100402&quot;, &quot;020100305&quot;, &quot;020100301&quot;, &quot;020100303&quot;, &quot;020100307&quot;, &quot;020100306&quot;, &quot;020100205&quot;, &quot;0...
## $ PROV_                     &lt;chr&gt; &quot;02&quot;, &quot;02&quot;, &quot;02&quot;, &quot;02&quot;, &quot;02&quot;, &quot;02&quot;, &quot;02&quot;, &quot;02&quot;, &quot;02&quot;, &quot;02&quot;, &quot;02&quot;, &quot;02&quot;, &quot;02&quot;, &quot;02&quot;, &quot;02&quot;, &quot;02...
## $ DEPTO_                    &lt;chr&gt; &quot;010&quot;, &quot;010&quot;, &quot;010&quot;, &quot;010&quot;, &quot;010&quot;, &quot;010&quot;, &quot;010&quot;, &quot;010&quot;, &quot;010&quot;, &quot;010&quot;, &quot;010&quot;, &quot;010&quot;, &quot;010&quot;, &quot;0...
## $ pop                       &lt;int&gt; 110, 1405, 1162, 762, 591, 738, 752, 481, 1129, 555, 1047, 803, 906, 659, 726, 802, 786, 759,...
## $ pop014                    &lt;int&gt; 14, 180, 177, 74, 109, 124, 133, 81, 147, 99, 155, 144, 150, 108, 124, 146, 117, 124, 174, 12...
## $ pop1564                   &lt;int&gt; 96, 1049, 757, 528, 366, 532, 473, 297, 768, 336, 681, 503, 650, 436, 506, 522, 520, 536, 556...
## $ pop64plus                 &lt;int&gt; 0, 176, 228, 160, 116, 82, 146, 103, 214, 120, 211, 156, 106, 115, 96, 134, 149, 99, 170, 105...
## $ highSchoolAboveALLPOP     &lt;int&gt; 25, 851, 619, 396, 286, 329, 352, 256, 554, 307, 528, 300, 435, 234, 351, 291, 338, 350, 314,...
## $ terciarioAboveALLPOP      &lt;int&gt; 6, 600, 427, 217, 193, 221, 191, 148, 365, 211, 299, 165, 285, 108, 249, 137, 165, 222, 136, ...
## $ universitaryAboveALLPOP   &lt;int&gt; 2, 354, 248, 118, 123, 135, 81, 77, 190, 108, 150, 82, 159, 46, 136, 66, 91, 138, 55, 157, 86...
## $ highSchoolAbove2564       &lt;int&gt; 10, 704, 477, 310, 204, 284, 274, 194, 451, 224, 419, 250, 383, 192, 279, 242, 268, 304, 266,...
## $ terciarioAbove2564        &lt;int&gt; 3, 530, 357, 187, 142, 200, 165, 121, 325, 165, 259, 150, 262, 97, 212, 129, 151, 204, 126, 2...
## $ universitaryAbove2564     &lt;int&gt; 2, 324, 209, 110, 97, 126, 75, 64, 177, 95, 142, 77, 153, 46, 122, 64, 83, 132, 53, 147, 78, ...
## $ pop2564                   &lt;int&gt; 60, 891, 593, 407, 277, 422, 384, 248, 642, 280, 586, 387, 536, 327, 377, 401, 390, 403, 436,...
## $ avgAge                    &lt;dbl&gt; 28.72727, 36.58434, 40.85714, 43.49213, 41.24196, 36.57182, 40.04255, 41.98753, 41.31709, 41....
## $ descuentoJubil            &lt;dbl&gt; 0.6333333, 0.8321256, 0.8084291, 0.7699387, 0.7460938, 0.8010899, 0.7523511, 0.8271028, 0.785...
## $ descuentoJubilAsalariado  &lt;dbl&gt; 0.8181818, 0.8921933, 0.8626198, 0.8403756, 0.7751938, 0.8604651, 0.8512821, 0.8661972, 0.837...
## $ asalariado                &lt;dbl&gt; 0.7333333, 0.6497585, 0.5996169, 0.6533742, 0.5039062, 0.7029973, 0.6112853, 0.6635514, 0.616...
## $ cuentapropia              &lt;dbl&gt; 0.2000000, 0.3393720, 0.3888889, 0.3404908, 0.4765625, 0.2833787, 0.3761755, 0.3364486, 0.367...
## $ servDomestico             &lt;dbl&gt; 0.1000000, 0.0205314, 0.0287356, 0.0276074, 0.0546875, 0.0299728, 0.0250784, 0.0467290, 0.040...
## $ asalariadoPrivado         &lt;dbl&gt; 0.1333333, 0.1086957, 0.1800766, 0.1932515, 0.1757812, 0.1771117, 0.1285266, 0.1495327, 0.093...
## $ ocupadosUniversitariaComp &lt;dbl&gt; 0.0000000, 0.3683575, 0.3639847, 0.3036810, 0.3945312, 0.3024523, 0.2100313, 0.2897196, 0.281...
## $ geometry                  &lt;MULTIPOLYGON [m]&gt; MULTIPOLYGON (((4192913 615..., MULTIPOLYGON (((4192240 615..., MULTIPOLYGON (((...</code></pre>
</div>
<div id="diferentes-radios-censales" class="section level2">
<h2><span class="header-section-number">7.2</span> Diferentes radios censales</h2>
<p>Como les comenté anteriormente, los radios censales para la Ciudad de Buenos Aires sufrieron importantes cambios en su forma. Pero no hace falta que me crean a mí o a la imagen que puse anteriormente: con R pueden verlo por ustedes mismos. De paso, vamos a introducir una función nueva de sf y algo nuevo sobre cómo hacer múltiples mapas.</p>
<p>Vamos a observar cómo son los radios censales en Palermo para 2001 y para 2010. Para esto lo primero que debemos hacer es hacer “zoom” en Palermo para ambos censos y luego hacer un mapa que los muestre lado a lado. La función <strong>st_crop</strong> será muy útil para esto. Lo que hace recortar los polígonos en base a las coordenadas más “externas” de un determinado polígono. De esta manera, siempre queda un cuadrado o un rectángulo en general “centrado” con respecto a los datos espaciales que nosotros queremos.</p>
<div class="sourceCode" id="cb252"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb252-1"><a href="making-polygons-comparable-again.html#cb252-1"></a><span class="co"># Palermo tiene el código de departamento número 014</span></span>
<span id="cb252-2"><a href="making-polygons-comparable-again.html#cb252-2"></a>radiosCensalesPalermo2010 &lt;-<span class="st"> </span>datosCenso2010[datosCenso2010<span class="op">$</span>DEPTO_ <span class="op">%in%</span><span class="st"> &#39;014&#39;</span>,] <span class="op">%&gt;%</span></span>
<span id="cb252-3"><a href="making-polygons-comparable-again.html#cb252-3"></a><span class="st">  </span><span class="kw">st_union</span>()</span>
<span id="cb252-4"><a href="making-polygons-comparable-again.html#cb252-4"></a>palermo2010 &lt;-<span class="st"> </span><span class="kw">st_crop</span>(<span class="dt">x =</span> datosCenso2010,</span>
<span id="cb252-5"><a href="making-polygons-comparable-again.html#cb252-5"></a>                       <span class="dt">y =</span> radiosCensalesPalermo2010)</span></code></pre></div>
<pre><code>## Warning: attribute variables are assumed to be spatially constant throughout all geometries</code></pre>
<div class="sourceCode" id="cb254"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb254-1"><a href="making-polygons-comparable-again.html#cb254-1"></a>palermo2001 &lt;-<span class="st"> </span><span class="kw">st_crop</span>(<span class="dt">x =</span> datosCenso2001,</span>
<span id="cb254-2"><a href="making-polygons-comparable-again.html#cb254-2"></a>                       <span class="dt">y =</span> radiosCensalesPalermo2010)</span></code></pre></div>
<pre><code>## Warning: attribute variables are assumed to be spatially constant throughout all geometries</code></pre>
<p>¿Qué significa ese warning <em>attribute variables are assumed to be spatially constant throughout all geometries</em>? Lo que nos avisa es que st_crop cortó algunos polígonos y les asignó el valor de los atributos que tenían cuando los polígonos estaban completos ¿Esto es correcto? Depende de la variable con la que estamos trabajando. Imaginen que la variable nos describe el uso de la tierra. Si el polígono más grande era una zona industrial, un polígono recortado de él también tiene que ser una zona industrial, por lo cual no hay problema. Ahora imaginen que es el la cantidad de personas que viven allí. Es altamente problable que al recortar el polígono no sea correcto asignar la misma cantidad de personas. En este ejemplo particular esto nos tiene sin cuidado, ya que solo queremos quedarnos con la zona de Palermo y no usar sus variables.</p>
<p>Ahora hagamos unos gráficos simples de Palermo en ambos censos con <strong>tmaps</strong>. Presten atención a la nueva función <strong>tm_sf()</strong>. Lo que hace es graficar la columna <strong>geometry</strong> que se encuentra en los datos que le pasamos con <strong>tm_shape</strong>. De esta manera, imita el tipo de datos que hay y no hace falta aclararle si son puntos o polígonos, por ejemplo.
Luego usamos la función <strong>tm_layout</strong> que nos ayuda para modificar algunas cuestiones relacionadas con el diseño, como el título.
Finalmente usamos <strong>tmap_arrange</strong> al que le podemos pasar gráficos y los acomoda en un mismo panel para mostrarlos de un solo golpe.</p>
<div class="sourceCode" id="cb256"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb256-1"><a href="making-polygons-comparable-again.html#cb256-1"></a>mapa2001 &lt;-<span class="st"> </span><span class="kw">tm_shape</span>(palermo2001) <span class="op">+</span></span>
<span id="cb256-2"><a href="making-polygons-comparable-again.html#cb256-2"></a><span class="st">  </span><span class="kw">tm_sf</span>(<span class="dt">border.col =</span> <span class="st">&#39;black&#39;</span>,<span class="dt">col =</span> <span class="st">&#39;grey90&#39;</span>) <span class="op">+</span></span>
<span id="cb256-3"><a href="making-polygons-comparable-again.html#cb256-3"></a><span class="st">  </span><span class="kw">tm_layout</span>(<span class="dt">title=</span><span class="st">&#39;Radios censales 2001 - Palermo&#39;</span>)  </span>
<span id="cb256-4"><a href="making-polygons-comparable-again.html#cb256-4"></a>mapa2010 &lt;-<span class="st"> </span><span class="kw">tm_shape</span>(palermo2010) <span class="op">+</span></span>
<span id="cb256-5"><a href="making-polygons-comparable-again.html#cb256-5"></a><span class="st">  </span><span class="kw">tm_sf</span>(<span class="dt">border.col =</span>  <span class="st">&#39;black&#39;</span>,<span class="dt">col =</span> <span class="st">&#39;grey90&#39;</span>) <span class="op">+</span></span>
<span id="cb256-6"><a href="making-polygons-comparable-again.html#cb256-6"></a><span class="st">  </span><span class="kw">tm_layout</span>(<span class="dt">title=</span><span class="st">&#39;Radios censales 2010 - Palermo&#39;</span>)</span>
<span id="cb256-7"><a href="making-polygons-comparable-again.html#cb256-7"></a><span class="kw">tmap_arrange</span>(mapa2001, mapa2010)</span></code></pre></div>
<p><img src="AnalisisEspacialEnR_files/figure-html/unnamed-chunk-198-1.png" width="672" /></p>
<p>Antes de analizar los gráficos, un par de puntos a tener en cuenta. Noten que guardé los mapas individualmente en objetos. Esto es realmente útil en algunas cirscunstancias, y no solo para luego ponerlos en un panel. Nos sirve, por ejemplo, para ir agregando capas de a poco a nuestro gráfico e ir guardando las versiones intermedias. En segundo lugar, es importante saber cómo exportar estos gráficos. Es realmente simple con <strong>tmap</strong> y también con <strong>ggplot</strong>. En este caso, al estar trabajando con <strong>tmap</strong> ejecuten lo siguiente:</p>
<div class="sourceCode" id="cb257"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb257-1"><a href="making-polygons-comparable-again.html#cb257-1"></a>graficoSalida &lt;-<span class="st"> </span><span class="kw">tmap_arrange</span>(mapa2001, mapa2010)</span>
<span id="cb257-2"><a href="making-polygons-comparable-again.html#cb257-2"></a><span class="kw">tmap_save</span>(graficoSalida,<span class="dt">dpi =</span> <span class="dv">300</span>, <span class="dt">filename =</span> <span class="st">&#39;comparacionradioscensales.png&#39;</span>)</span></code></pre></div>
<p><strong>tmap_save</strong> solo requiere del objeto a exportar (en nuestro caso, graficoSalida) y la dirección y nombre donde se guardará (en este caso, lo guardamos en la misma carpeta del proyecto con el nombre ‘comparacionradioscensales.png’). DPI es un parámetro adicional que indica la cantidad de Dots Per Inch (DPI) que queremos que tenga nuestra imagen. 300 DPI es una cantidad elevada para gráficos en la computadora.</p>
<p>Volvamos a los gráficos de los radios censales. Comparen distintos puntos de Palermo y verán que las diferencias son elevadas entre ambos censos. Aun si este cambio en los polígonos no es del todo reparable, podemos comparar la evolución de diferentes variables si estamos dispuestos a tolerar un error basado en la asunción de que las variables se distribuyen uniformemente en el espacio.</p>
<div id="breve-desvío-haciendo-lo-mismo-con-ggplot" class="section level3">
<h3><span class="header-section-number">7.2.1</span> Breve desvío: haciendo lo mismo con ggplot()</h3>
<p>La librería ggplot2 es la más utilizada para hacer gráficos en R. Veamos cómo hacer lo mismo que hicimos en la subsección anterior, pero esta vez usando esta librería. La principal diferencia es que ggplot, para graficar más de un gráfico en un panel, nos pide que los datos estén todos juntos en un mismo data.frame. Esto es lo que se muestra en el capítulo de visualizaciones de este mismo libro.</p>
<p>Sin embargo, no siempre esta es la mejor elección. Muchas veces queremos hacer gráficos con datos que están representados en distintos objetos y esto no debería ser un impedimento para poder armar nuestro panele de graficos. Por suerte, el paquete gridExtra tiene exactamente lo que necesitamos para solucionar este problema. No se olviden de <strong>instalar el paquete gridExtra</strong> para poder ejecutar lo siguiente:</p>
<div class="sourceCode" id="cb258"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb258-1"><a href="making-polygons-comparable-again.html#cb258-1"></a><span class="kw">library</span>(gridExtra)</span>
<span id="cb258-2"><a href="making-polygons-comparable-again.html#cb258-2"></a></span>
<span id="cb258-3"><a href="making-polygons-comparable-again.html#cb258-3"></a>mapa2001 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(palermo2001) <span class="op">+</span></span>
<span id="cb258-4"><a href="making-polygons-comparable-again.html#cb258-4"></a><span class="st">  </span><span class="kw">geom_sf</span>(<span class="dt">col =</span> <span class="st">&#39;black&#39;</span>,<span class="dt">fill =</span> <span class="st">&#39;grey90&#39;</span>) <span class="op">+</span></span>
<span id="cb258-5"><a href="making-polygons-comparable-again.html#cb258-5"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title=</span><span class="st">&#39;Radios censales 2001 - Palermo&#39;</span>) <span class="op">+</span></span>
<span id="cb258-6"><a href="making-polygons-comparable-again.html#cb258-6"></a><span class="st">  </span><span class="kw">coord_sf</span>(<span class="dt">datum =</span> <span class="ot">NA</span>) <span class="op">+</span></span>
<span id="cb258-7"><a href="making-polygons-comparable-again.html#cb258-7"></a><span class="st">  </span><span class="kw">theme_minimal</span>()</span>
<span id="cb258-8"><a href="making-polygons-comparable-again.html#cb258-8"></a>mapa2010 &lt;-<span class="st"> </span><span class="kw">ggplot</span>(palermo2010) <span class="op">+</span></span>
<span id="cb258-9"><a href="making-polygons-comparable-again.html#cb258-9"></a><span class="st">  </span><span class="kw">geom_sf</span>(<span class="dt">col =</span> <span class="st">&#39;black&#39;</span>,<span class="dt">fill =</span> <span class="st">&#39;grey90&#39;</span>) <span class="op">+</span></span>
<span id="cb258-10"><a href="making-polygons-comparable-again.html#cb258-10"></a><span class="st">  </span><span class="kw">coord_sf</span>(<span class="dt">datum =</span> <span class="ot">NA</span>) <span class="op">+</span></span>
<span id="cb258-11"><a href="making-polygons-comparable-again.html#cb258-11"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title=</span><span class="st">&#39;Radios censales 2010 - Palermo&#39;</span>) <span class="op">+</span></span>
<span id="cb258-12"><a href="making-polygons-comparable-again.html#cb258-12"></a><span class="st">  </span><span class="kw">theme_minimal</span>()</span>
<span id="cb258-13"><a href="making-polygons-comparable-again.html#cb258-13"></a><span class="kw">grid.arrange</span>(mapa2001, mapa2010,<span class="dt">ncol=</span><span class="dv">2</span>)</span></code></pre></div>
<p><img src="AnalisisEspacialEnR_files/figure-html/unnamed-chunk-200-1.png" width="672" /></p>
<p>Muy similar a lo que hicimos con tmap, no? El código incluso se parece bastente, con algunos cambios. <em>coord_sf(datum = NA)</em> lo usamos para que ggplot no nos muestre información sobre el sistemas de coordenadas de referencia (puede ser muy molesto para nuestro gráfico). <em>themee_minimal()</em> saca mucho de los elementos que los gráficos en ggplot tienen por default. Ahora sí, sigamos con lo importante.</p>
</div>
</div>
<div id="make-polygons-comparable-again" class="section level2">
<h2><span class="header-section-number">7.3</span> Make polygons comparable again</h2>
<p>Estamos en condiciones de hacer lo que buscábamos: hacer comparables a los polígonos ¿Qué hace nuestro algoritmo de Areal Weighted Interpolation?</p>
<p>Resumiendo y simplificando un poco, lo que hace es realmente simple: estima el porcentaje de un polígono que se solapa con otro y le asigna de manera proporcional el valor de las variables. Pero hay que tener en cuenta que las variables pueden ser conteos (como población) o porcentajes (como por ejemplo el porcentaje de población con estudios secundarios completos). En el primer caso, el algoritmo debe sumar las distintas partes que forman al polígono, mientras que en el segundo debe ponderar el porcentaje de acuerdo al solapamiento.</p>
<p>En nuestros objetos tenemos ejemplos de ambas variables. Por ejemplo, en ambos casos tenemos el promedio de edad (<strong>avgAge</strong>), pero también la población de personas menores a 14 años (<strong>pop014</strong>). Veamos cómo podemos transformar los polígonos de 2001 a los del 2010 para poder observar la distribución de estas dos variables para los dos censos.</p>
<p>El paquete que nos ayudará para lograr este objetivo es <strong>areal</strong>. <strong>Instalenlo si es la primera vez que están trabajando con este paquete.</strong> Ya deberían saber como hacerlo: <strong>install.packages(‘areal’)</strong>. Una vez que lo tengan instalado, usen <strong>require</strong> o <strong>library</strong> para poder usar la función <strong>aw_interpolate</strong>.</p>
<p>La función pide algunos parámetros. En primer lugar, <strong>source</strong> pide el objeto cuya información espacial queremos cambiar, en este caso los datos del censo 2001. Luego, nos pide el <strong>sid</strong>, que no es otra cosa que un conjunto de identificadores únicos para cada uno de los datos de nuestra <strong>source</strong>. Luego, en <strong>.data</strong> nos pide el <em>target</em>, es decir la forma que van a tomar nuestros datos espaciales, en nuestro ejemplo los radios censales de 2010, y también nos pide los ids (identificadores) correspondientes en <strong>tid</strong>. Luego, nos pide como quiere que ponderemos los nuevos polígonos con el parámetro <strong>weight</strong>, en nuestro caso queremos que sume (<em>sum</em>) proporcionalmente cada uno de los polígonos que contribuirán con el polígono de 2010. El parámetro <strong>output</strong> nos indica si queremos que nos devuelva un objeto sf con la columna de <em>geometry</em> incluida, o simplemente un data frame, elegimos ‘sf’. Finalmente, debemos indicar las variables <strong>intensivas</strong> o <strong>extensivas</strong> de los datos de origen. Las primeras hacen referencia a las variables que son porcentajes, mientras que las segundas hacen referencia a variables que son simplemente conteos. Nosotros tenemos una variable de cada una: pop014 es conteo mientras que avgAge es una variable extensiva.</p>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb259-1"><a href="making-polygons-comparable-again.html#cb259-1"></a><span class="kw">library</span>(areal)</span>
<span id="cb259-2"><a href="making-polygons-comparable-again.html#cb259-2"></a>nuevosDatos &lt;-<span class="st"> </span><span class="kw">aw_interpolate</span>(<span class="dt">source=</span>datosCenso2001, <span class="dt">sid =</span> COD_<span class="dv">2001</span>,</span>
<span id="cb259-3"><a href="making-polygons-comparable-again.html#cb259-3"></a>                              <span class="dt">.data=</span>datosCenso2010, <span class="dt">tid =</span> COD_<span class="dv">2010</span>,</span>
<span id="cb259-4"><a href="making-polygons-comparable-again.html#cb259-4"></a>                              <span class="dt">weight=</span><span class="st">&quot;sum&quot;</span>, <span class="dt">output =</span> <span class="st">&quot;sf&quot;</span>,</span>
<span id="cb259-5"><a href="making-polygons-comparable-again.html#cb259-5"></a>                              <span class="dt">extensive =</span> <span class="st">&#39;pop014&#39;</span>,</span>
<span id="cb259-6"><a href="making-polygons-comparable-again.html#cb259-6"></a>                              <span class="dt">intensive =</span> <span class="st">&#39;avgAge&#39;</span>)</span></code></pre></div>
<pre><code>## Error in aw_interpolate(source = datosCenso2001, sid = COD_2001, .data = datosCenso2010, : Data validation failed. Use ar_validate with verbose = TRUE to identify concerns.</code></pre>
<p>¡No funcionó! Veamos por qué no funcionó usando la función <strong>ar_validate()</strong> que hace un chequeo de si la interpolación puede funcionar o no entre dos objetos</p>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb261-1"><a href="making-polygons-comparable-again.html#cb261-1"></a><span class="kw">ar_validate</span>(<span class="dt">source =</span> datosCenso2001,</span>
<span id="cb261-2"><a href="making-polygons-comparable-again.html#cb261-2"></a>            <span class="dt">target =</span> datosCenso2010,</span>
<span id="cb261-3"><a href="making-polygons-comparable-again.html#cb261-3"></a>            <span class="dt">varList =</span> <span class="kw">c</span>(<span class="st">&#39;pop014&#39;</span>,<span class="st">&#39;avgAge&#39;</span>),</span>
<span id="cb261-4"><a href="making-polygons-comparable-again.html#cb261-4"></a>            <span class="dt">verbose =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 2
##   test                            result
##   &lt;chr&gt;                           &lt;lgl&gt; 
## 1 sf Objects                      TRUE  
## 2 CRS Match                       TRUE  
## 3 CRS is Planar                   TRUE  
## 4 Variables Exist in Source       TRUE  
## 5 No Variable Conflicts in Target FALSE 
## 6 Overall Evaluation              FALSE</code></pre>
<p>La función chequea 5 condiciones necesarias para que la interpolación funcione y nos indica si se cumple o no. En la primera se pregunta si ambos objetos son <strong>sf</strong>, la segunda si los sistema de coordenadas de referencia son iguales, la tercera si se encuentran proyectados, la cuarta nos indica si las variables que queremos convertir existen en el objeto de origen (<strong>source</strong>) y la quinta si no existen conflictos con el nombre de las variables en el objeto de destino. La sexta, overall evaluation, solo nos dice si todas se cumplen o no.</p>
<p>En nuestro caso nos indica que hay algún conflicto en el objeto de destino. Lo que sucede es que las variables se llaman igual en el objeto de origen y destino, por lo que debemos cambiar los nombres de las columnas para que funcione aw_interpolate. Para esto, debemos usar la función colnames y paste0:</p>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb263-1"><a href="making-polygons-comparable-again.html#cb263-1"></a><span class="kw">colnames</span>(datosCenso2001)[<span class="kw">colnames</span>(datosCenso2001) <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;pop014&#39;</span>,<span class="st">&#39;avgAge&#39;</span>)] &lt;-</span>
<span id="cb263-2"><a href="making-polygons-comparable-again.html#cb263-2"></a><span class="kw">paste0</span>(<span class="kw">c</span>(<span class="st">&#39;pop014&#39;</span>,<span class="st">&#39;avgAge&#39;</span>),<span class="st">&#39;_2001&#39;</span>)</span>
<span id="cb263-3"><a href="making-polygons-comparable-again.html#cb263-3"></a><span class="kw">colnames</span>(datosCenso2001)</span></code></pre></div>
<pre><code>##  [1] &quot;COD_2001&quot;                  &quot;PROV_&quot;                     &quot;DEPTO_&quot;                    &quot;pop&quot;                      
##  [5] &quot;pop014_2001&quot;               &quot;pop1564&quot;                   &quot;pop64plus&quot;                 &quot;highSchoolAboveALLPOP&quot;    
##  [9] &quot;terciarioAboveALLPOP&quot;      &quot;universitaryAboveALLPOP&quot;   &quot;highSchoolAbove2564&quot;       &quot;terciarioAbove2564&quot;       
## [13] &quot;universitaryAbove2564&quot;     &quot;pop2564&quot;                   &quot;avgAge_2001&quot;               &quot;descuentoJubil&quot;           
## [17] &quot;descuentoJubilAsalariado&quot;  &quot;asalariado&quot;                &quot;cuentapropia&quot;              &quot;servDomestico&quot;            
## [21] &quot;asalariadoPrivado&quot;         &quot;ocupadosUniversitariaComp&quot; &quot;geometry&quot;</code></pre>
<p>Ya sabemos que la función colnames() nos devuelve los nombres de las columnas de un data frame. Luego, elegimos aquellas columnas que tienen nombre de ‘pop014’ y ‘avgAge’. Finalmente, le asignamos lo que devuelve <strong>paste0()</strong>. Lo que hace es concatenar cadenas de texto, en este caso pop014 con _2001 y avgAge con _2001. Chequeen nuevamente los nombres de las columnas y verán que están cambiados.
Ahora sí podemos correr nuestro código</p>
<div class="sourceCode" id="cb265"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb265-1"><a href="making-polygons-comparable-again.html#cb265-1"></a>nuevosDatos &lt;-<span class="st"> </span><span class="kw">aw_interpolate</span>(<span class="dt">source=</span>datosCenso2001, <span class="dt">sid =</span> COD_<span class="dv">2001</span>,</span>
<span id="cb265-2"><a href="making-polygons-comparable-again.html#cb265-2"></a>                              <span class="dt">.data=</span>datosCenso2010, <span class="dt">tid =</span> COD_<span class="dv">2010</span>,</span>
<span id="cb265-3"><a href="making-polygons-comparable-again.html#cb265-3"></a>                              <span class="dt">weight=</span><span class="st">&quot;sum&quot;</span>, <span class="dt">output =</span> <span class="st">&quot;sf&quot;</span>,</span>
<span id="cb265-4"><a href="making-polygons-comparable-again.html#cb265-4"></a>                              <span class="dt">extensive =</span> <span class="st">&#39;pop014_2001&#39;</span>,</span>
<span id="cb265-5"><a href="making-polygons-comparable-again.html#cb265-5"></a>                              <span class="dt">intensive =</span> <span class="st">&#39;avgAge_2001&#39;</span>)</span>
<span id="cb265-6"><a href="making-polygons-comparable-again.html#cb265-6"></a><span class="kw">colnames</span>(nuevosDatos)</span></code></pre></div>
<pre><code>##  [1] &quot;COD_2010&quot;                  &quot;PROV_&quot;                     &quot;DEPTO_&quot;                    &quot;pop&quot;                      
##  [5] &quot;pop014&quot;                    &quot;pop1564&quot;                   &quot;pop64plus&quot;                 &quot;highSchoolAboveALLPOP&quot;    
##  [9] &quot;terciarioAboveALLPOP&quot;      &quot;universitaryAboveALLPOP&quot;   &quot;highSchoolAbove2564&quot;       &quot;terciarioAbove2564&quot;       
## [13] &quot;universitaryAbove2564&quot;     &quot;pop2564&quot;                   &quot;avgAge&quot;                    &quot;ocupadosUniversitariaComp&quot;
## [17] &quot;geometry&quot;                  &quot;pop014_2001&quot;               &quot;avgAge_2001&quot;</code></pre>
</div>
<div id="haciendo-mapas-de-nuestros-nuevos-datos" class="section level2">
<h2><span class="header-section-number">7.4</span> Haciendo mapas de nuestros nuevos datos</h2>
<p>Aprovechemos la nueva información que tenemos para poder hacer mapas. Usando ggplot2, grafiquemos la edad promedio en 2001, 2010 y la variación entre ambos censos.</p>
<p>Lo primero que tenemos que hacer en ggplot, para que la leyenda represente correctamente los colores de nuestro mapa, es juntar todo en un mismo dataset que sea largo. Recuerden que esto es lo necesario para trabajar con paneles y facet_wrap().</p>
<p>Seleccionamos las dos y usamos pivot_longer()</p>
<div class="sourceCode" id="cb267"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb267-1"><a href="making-polygons-comparable-again.html#cb267-1"></a>nuevosDatosLonger &lt;-<span class="st"> </span>nuevosDatos <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(avgAge, avgAge_<span class="dv">2001</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pivot_longer</span>(<span class="dt">names_to =</span> <span class="st">&quot;Year&quot;</span>, <span class="dt">values_to =</span> <span class="st">&quot;AvgAge&quot;</span>, <span class="dt">cols =</span> <span class="kw">c</span>(<span class="st">&quot;avgAge&quot;</span>, </span>
<span id="cb267-2"><a href="making-polygons-comparable-again.html#cb267-2"></a>    <span class="st">&quot;avgAge_2001&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">st_as_sf</span>()</span></code></pre></div>
<p><strong>select()</strong> y <strong>pivot_longer()</strong> no deberían traer demasiados problemas. Ahora bien, fijense que luego de hacer esto, usamos st_as_sf(), que como vimos en el capítulo de datos espaciales define a un data.frame como un objeto espacial sf. Esto no debería pasar, pero cuando usan pivot_longer, el data.frame deja de ser sf, pero como no pierde la columna de geometry, rápidamente podemos volver a convertirlo en un objeto sf. El mensaje que reciben es un error de cuando se usa pivot_longer. Queda resuelto cuando usamos st_as_sf() luego.</p>
<p>Si quisieran, ya podrían hacer el gráfico, pero no sería el que ustedes quisieran guardar para compartir. Vamos a hacer algunos cambios, y de paso aprender un poco más sobre los factores en R. Para que <strong>facet_wrap()</strong> ponga en el lado izquierdo a 2001 y en el derecho a 2010, debemos convertir la variable <em>Year</em> a factor en el orden que queremos.</p>
<div class="sourceCode" id="cb268"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb268-1"><a href="making-polygons-comparable-again.html#cb268-1"></a>nuevosDatosLonger &lt;-<span class="st"> </span>nuevosDatosLonger <span class="op">%&gt;%</span></span>
<span id="cb268-2"><a href="making-polygons-comparable-again.html#cb268-2"></a><span class="st">                     </span><span class="kw">mutate</span>(<span class="dt">Year=</span><span class="kw">factor</span>(Year,<span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;avgAge_2001&quot;</span>,<span class="st">&quot;avgAge&quot;</span>),<span class="dt">labels =</span> <span class="kw">c</span>(<span class="dv">2001</span>,<span class="dv">2010</span>)))</span></code></pre></div>
<p>Lo que hicimos es decirle a R que 1) queremos que la columna R se convierta a factor, 2) que los valores que tiene esa variable son “avgAge_2001” y “avgAge” y 3) que queremos los represente como “2001” y 2010, respectivamente. Internamente, R va a hacer que Year sea un vector numérico, con 1 represenetando a “2001” y 2 a “2010”, aunque todo el tiempo podemos trabajarlo como si fuera un vector de character. Esto es lo que logran los factores.</p>
<div class="sourceCode" id="cb269"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb269-1"><a href="making-polygons-comparable-again.html#cb269-1"></a>nuevosDatosLonger<span class="op">$</span>Year[<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>] <span class="co"># Lo que nos muestra</span></span></code></pre></div>
<pre><code>## [1] 2010 2001 2010 2001 2010 2001
## Levels: 2001 2010</code></pre>
<div class="sourceCode" id="cb271"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb271-1"><a href="making-polygons-comparable-again.html#cb271-1"></a><span class="kw">as.numeric</span>(nuevosDatosLonger<span class="op">$</span>Year)[<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>] <span class="co"># Como lo tiene en memoria</span></span></code></pre></div>
<pre><code>## [1] 2 1 2 1 2 1</code></pre>
<p>Muy bien, ahora vamos a mejorar nuestro gráfico y, en lugar de hacerlo continuo, vamos a hacerlo discreto, haciendo que cada color represente el 25% de nuestros datos, lo que se conoce como cuartiles. Para discretizar un vector continuo, lo que tenemos que usar es <strong>cut()</strong>. Solo nos pide el vector y los puntos de quiebre. Estos puntos de quiebre no son otra cosa que un vector con estos valores. Veamos qué hace la funcion <strong>quantile()</strong></p>
<div class="sourceCode" id="cb273"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb273-1"><a href="making-polygons-comparable-again.html#cb273-1"></a><span class="kw">quantile</span>(nuevosDatosLonger<span class="op">$</span>AvgAge,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<pre><code>##       0%      25%      50%      75%     100% 
## 20.17079 38.02628 39.80790 41.38003 52.92446</code></pre>
<p>De manera predeterminada, nos devuelvee los puntos de corte de los cuartiles, nada mal. El na.rm=TRUE es tan solo para que no tome en cuenta un valor NA que hay ene AvgAge, con el que lidiamos más adelante. Con estos datos podemos discretizar nuestra variable.</p>
<div class="sourceCode" id="cb275"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb275-1"><a href="making-polygons-comparable-again.html#cb275-1"></a>nuevosDatosLonger &lt;-<span class="st"> </span>nuevosDatosLonger <span class="op">%&gt;%</span></span>
<span id="cb275-2"><a href="making-polygons-comparable-again.html#cb275-2"></a><span class="st">                     </span><span class="kw">mutate</span>(<span class="dt">AvgAge=</span><span class="kw">cut</span>(AvgAge,<span class="dt">breaks =</span> <span class="kw">quantile</span>(AvgAge,<span class="dt">na.rm =</span> <span class="ot">TRUE</span>)))</span></code></pre></div>
<p>Perfecto, veamos qué es lo que hizo usando table()</p>
<div class="sourceCode" id="cb276"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb276-1"><a href="making-polygons-comparable-again.html#cb276-1"></a><span class="kw">table</span>(nuevosDatosLonger<span class="op">$</span>AvgAge)</span></code></pre></div>
<pre><code>## 
##   (20.2,38]   (38,39.8] (39.8,41.4] (41.4,52.9] 
##        1776        1776        1776        1776</code></pre>
<p>Lo hizo muy bien, pero esos intervalos los entendería solo una matemática. Podemos cambiarlos por algo mucho más interpretable:</p>
<div class="sourceCode" id="cb278"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb278-1"><a href="making-polygons-comparable-again.html#cb278-1"></a><span class="kw">levels</span>(nuevosDatosLonger<span class="op">$</span>AvgAge) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;De 20 a 38 años&quot;</span>,<span class="st">&quot;entre 38 y 39.8 años&quot;</span>,<span class="st">&quot;entre 39.8 y 41.4 años&quot;</span>,<span class="st">&quot;más de 41.4 años y menos de 52.9&quot;</span>)</span></code></pre></div>
<p>Por último, eliminamos los NAs que había en nuestra variable de edad</p>
<div class="sourceCode" id="cb279"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb279-1"><a href="making-polygons-comparable-again.html#cb279-1"></a>nuevosDatosLonger &lt;-<span class="st"> </span>nuevosDatosLonger <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(AvgAge))</span></code></pre></div>
<p>Finalmente, podemos hacer nuestro gráfico. Si no comprenden totalmente el código, revisen el capítulo de visualizaciones.</p>
<div class="sourceCode" id="cb280"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb280-1"><a href="making-polygons-comparable-again.html#cb280-1"></a><span class="kw">ggplot</span>(nuevosDatosLonger) <span class="op">+</span></span>
<span id="cb280-2"><a href="making-polygons-comparable-again.html#cb280-2"></a><span class="st">  </span><span class="kw">geom_sf</span>(<span class="dt">col =</span> <span class="ot">NA</span>, <span class="kw">aes</span>(<span class="dt">fill=</span>AvgAge)) <span class="op">+</span></span>
<span id="cb280-3"><a href="making-polygons-comparable-again.html#cb280-3"></a><span class="st">  </span><span class="kw">scale_fill_viridis_d</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb280-4"><a href="making-polygons-comparable-again.html#cb280-4"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title=</span><span class="st">&#39;Edad promedio por radio censal en años&#39;</span>, <span class="dt">fill=</span><span class="st">&quot;&quot;</span>) <span class="op">+</span></span>
<span id="cb280-5"><a href="making-polygons-comparable-again.html#cb280-5"></a><span class="st">  </span><span class="kw">coord_sf</span>(<span class="dt">datum =</span> <span class="ot">NA</span>) <span class="op">+</span></span>
<span id="cb280-6"><a href="making-polygons-comparable-again.html#cb280-6"></a><span class="st">  </span><span class="kw">theme_minimal</span>() <span class="op">+</span></span>
<span id="cb280-7"><a href="making-polygons-comparable-again.html#cb280-7"></a><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>Year) <span class="op">+</span></span>
<span id="cb280-8"><a href="making-polygons-comparable-again.html#cb280-8"></a><span class="st">  </span><span class="kw">theme</span>(<span class="dt">legend.position =</span> <span class="st">&quot;bottom&quot;</span>)</span></code></pre></div>
<p><img src="AnalisisEspacialEnR_files/figure-html/unnamed-chunk-213-1.png" width="672" /></p>
</div>
<div id="ejercicio-1" class="section level2">
<h2><span class="header-section-number">7.5</span> Ejercicio</h2>
<p>La variable <em>ocupadosUniversitariaComp</em> indica la proporción de ocupados con estudios universitarios completos como el total de ocupados para cada uno de los radios censales en 2001 y 2010. Hagan un mapa usando ggplot que muestre a los datos de 2001 y 2010 en formato de polígonos 2010 en la Ciudad de Buenos Aire ¿Qué patrones encuentran?</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="mapas.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["AnalisisEspacialEnR.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
